menu "MAIA Board Configuration"
    menu "General Configuration"
        config MAIA_LOG_GENERAL_CONFIG
            bool "Log general configuration at startup"
            default y
            help
                Print all general configuration info during initialization.

        menu "Timeouts"
            config MAIA_TIMEOUT_SYNC_DATA_MIN
                int "Sync data to server timeout (minutes)"
                default 10
                range 1 1440
                help
                    Time interval to sync data with server.

            config MAIA_TIMEOUT_DISPLAY_OFF_SEC
                int "Display turn off timeout (seconds)"
                default 30
                range 5 300
                help
                    Inactivity time before turning off display.

            config MAIA_TIMEOUT_DISPLAY_SCREEN_SEC
                int "Display screen change timeout (seconds)"
                default 5
                range 1 60
                help
                    Time to auto-change display screen.
        endmenu

        menu "Miscellaneous"
            menu "Software Version"
                config MAIA_SW_VERSION_MAJOR
                    int "Major version"
                    default 1
                    range 0 99

                config MAIA_SW_VERSION_MINOR
                    int "Minor version"
                    default 0
                    range 0 99

                config MAIA_SW_VERSION_PATCH
                    int "Patch version"
                    default 0
                    range 0 99
            endmenu

            menu "Animal Information"
                config MAIA_ANIMAL_SPECIES
                    string "Species"
                    default "Dog"

                config MAIA_ANIMAL_BREED
                    string "Breed"
                    default "Unknown"

                config MAIA_ANIMAL_NAME
                    string "Name"
                    default "MAIA"

                config MAIA_ANIMAL_AGE
                    int "Age (years)"
                    default 0
                    range 0 30

                config MAIA_ANIMAL_WEIGHT
                    int "Weight (kg)"
                    default 0
                    range 0 200

                config MAIA_ANIMAL_BLOOD_TYPE
                    string "Blood type"
                    default "Unknown"

                config MAIA_ANIMAL_COMORBIDITY
                    string "Comorbidity"
                    default "None"

                config MAIA_ANIMAL_ALLERGY
                    string "Allergy"
                    default "None"
            endmenu

            menu "Tutor Information"
                config MAIA_TUTOR_NAME
                    string "First name"
                    default ""

                config MAIA_TUTOR_SURNAME
                    string "Surname"
                    default ""

                config MAIA_TUTOR_PHONE
                    string "Phone"
                    default ""

                config MAIA_TUTOR_EMAIL
                    string "Email"
                    default ""

                config MAIA_TUTOR_SOCIAL_MEDIA
                    string "Social media"
                    default ""

                config MAIA_TUTOR_COUNTRY
                    string "Country"
                    default ""

                config MAIA_TUTOR_STATE
                    string "State"
                    default ""

                config MAIA_TUTOR_CITY
                    string "City"
                    default ""

                config MAIA_TUTOR_STREET
                    string "Street"
                    default ""
            endmenu
        endmenu
    endmenu

    menu "Radio Configuration"
        menu "Bluetooth Configuration"
            # TODO: Add BLE configs when needed
        endmenu

        menu "WiFi Configuration"
            menu "Self (Access Point Mode)"
                config MAIA_WIFI_AP_SSID
                    string "AP SSID"
                    default "MAIA-Setup"
                    help
                        SSID for the Access Point created by MAIA device.

                config MAIA_WIFI_AP_PASSWORD
                    string "AP Password"
                    default "maiamute2026"
                    help
                        Password for the Access Point (min 8 chars).

                config MAIA_LED_BLINK_FREQ_AP_HZ
                    int "LED blink frequency in AP mode (Hz)"
                    default 10
                    range 1 100
                    help
                        LED blink frequency when device is in AP mode.
            endmenu

            menu "Server (Station Mode)"
                config MAIA_WIFI_STA_SSID
                    string "Server WiFi SSID"
                    default ""
                    help
                        SSID of the WiFi network to connect for data sync.
                        Configured via web interface and saved to NVS.

                config MAIA_WIFI_STA_PASSWORD
                    string "Server WiFi Password"
                    default ""
                    help
                        Password of the WiFi network to connect.
                        Configured via web interface and saved to NVS.

                config MAIA_WIFI_SYNC_INTERVAL_MIN
                    int "Data sync interval (minutes)"
                    default 10
                    range 1 1440
                    help
                        How often to connect and sync data with server.

                config MAIA_LED_BLINK_FREQ_STA_HZ
                    int "LED blink frequency in Station mode (Hz)"
                    default 10
                    range 1 100
                    help
                        LED blink frequency when device is in Station mode.
            endmenu
        endmenu
    endmenu

    menu "GPIO Configuration"
        menu "Haptic Motors (ERM)"
            menu "Haptic Motor Right"
                config MAIA_PWM_FREQ_MOTOR_RIGHT
                    int "PWM frequency (Hz)"
                    default 1000
                    range 100 10000
                    help
                        PWM frequency for right haptic motor control.
            endmenu

            menu "Haptic Motor Left"
                config MAIA_PWM_FREQ_MOTOR_LEFT
                    int "PWM frequency (Hz)"
                    default 1000
                    range 100 10000
                    help
                        PWM frequency for left haptic motor control.
            endmenu
        endmenu

        menu "Button Configuration"
            config MAIA_BUTTON_DEBOUNCE_MS
                int "Debounce time (ms)"
                default 50
                range 10 500
                help
                    Hardware debounce time to filter electrical noise.

            config MAIA_BUTTON_DOUBLE_CLICK_WINDOW_MS
                int "Double click window (ms)"
                default 500
                range 100 1000
                help
                    Maximum time between two clicks to detect double-click.

            config MAIA_BUTTON_LONG_PRESS_MS
                int "Long press duration (ms)"
                default 2000
                range 500 10000
                help
                    Hold button for this duration to trigger long press event.

            config MAIA_BUTTON_EXTRA_LONG_PRESS_1_MS
                int "Extra long press 1 duration (ms)"
                default 7000
                range 3000 60000
                help
                    Hold button for this duration to trigger extra long press 1.
                    Typically used for WiFi Client/Station mode activation.
                    Must be greater than Long press duration.

            config MAIA_BUTTON_EXTRA_LONG_PRESS_2_MS
                int "Extra long press 2 duration (ms)"
                default 12000
                range 5000 60000
                help
                    Hold button for this duration to trigger extra long press 2.
                    Typically used for WiFi AP mode activation.
                    Must be greater than Extra long press 1 duration.
        endmenu

        menu "LEDs Configuration"
            choice MAIA_LED_STATUS_GPIO
                prompt "Status LED GPIO"
                default MAIA_LED_GPIO_21
                help
                    Select which GPIO to use for status LED.

                config MAIA_LED_GPIO_21
                    bool "GPIO21 (Onboard RGB LED)"
                    help
                        Use onboard RGB LED (not accessible externally).

                config MAIA_LED_GPIO_39
                    bool "GPIO39 (MTCK - External)"
                    help
                        Use GPIO39 for external LED (requires soldering).
            endchoice

            config MAIA_LED_STATUS_PIN
                int
                default 21 if MAIA_LED_GPIO_21
                default 39 if MAIA_LED_GPIO_39
        endmenu
    endmenu

    menu "Devices Configuration"
        config MAIA_I2C_FREQ_HZ
            int "I2C bus frequency (Hz)"
            default 400000
            range 100000 1000000
            help
                I2C SCL clock frequency (standard: 100kHz, fast: 400kHz).

        menu "I2C Devices"
            menu "Motor Driver (DRV2605L)"
                config MAIA_DRV2605L_ENABLE
                    bool "Enable DRV2605L haptic motor driver"
                    default y
                    help
                        Enable DRV2605L I2C haptic motor driver for center motor.
                        Texas Instruments DRV2605L supports both ERM and LRA actuators
                        with built-in waveform library and real-time playback modes.

                menu "DRV2605L Configuration"
                    depends on MAIA_DRV2605L_ENABLE

                    config MAIA_DRV2605L_I2C_ADDR
                        hex "I2C address"
                        default 0x5A
                        help
                            DRV2605L I2C device address (default 0x5A).

                    choice MAIA_DRV2605L_ACTUATOR_TYPE
                        prompt "Actuator Type"
                        default MAIA_DRV2605L_ACTUATOR_ERM
                        help
                            Select motor type connected to DRV2605L.

                        config MAIA_DRV2605L_ACTUATOR_ERM
                            bool "ERM (Eccentric Rotating Mass)"
                            help
                                Standard vibration motor with rotating mass.
                                Example: 18000rpm coreless motor (1.5-3.7V).

                        config MAIA_DRV2605L_ACTUATOR_LRA
                            bool "LRA (Linear Resonant Actuator)"
                            help
                                Linear actuator with resonant frequency.
                                Requires different library and calibration.
                    endchoice

                    choice MAIA_DRV2605L_LIBRARY
                        prompt "Waveform Library"
                        depends on MAIA_DRV2605L_ACTUATOR_ERM
                        default MAIA_DRV2605L_LIBRARY_A
                        help
                            Select ERM waveform library (1-123 effects each).
                            Reference: DRV2605L Datasheet Section 11.2

                        config MAIA_DRV2605L_LIBRARY_A
                            bool "Library A (Sharp clicks, strong vibrations)"
                            help
                                General purpose library with sharp response.
                                Best for alerts and strong feedback.

                        config MAIA_DRV2605L_LIBRARY_B
                            bool "Library B (Soft bumps, light taps)"
                            help
                                Gentle feedback library.
                                Best for subtle notifications.

                        config MAIA_DRV2605L_LIBRARY_C
                            bool "Library C (Medium response)"
                            help
                                Balanced library between A and B.

                        config MAIA_DRV2605L_LIBRARY_D
                            bool "Library D (Alert patterns)"
                            help
                                Notification-focused patterns.

                        config MAIA_DRV2605L_LIBRARY_E
                            bool "Library E (Buzz patterns)"
                            help
                                Continuous vibration patterns.
                    endchoice

                    config MAIA_DRV2605L_LIBRARY_LRA
                        bool
                        default y if MAIA_DRV2605L_ACTUATOR_LRA
                        help
                            LRA library automatically selected for LRA actuators.

                    choice MAIA_DRV2605L_CONTROL_MODE
                        prompt "Control Mode"
                        default MAIA_DRV2605L_MODE_LIBRARY
                        help
                            Select haptic control mode.

                        config MAIA_DRV2605L_MODE_LIBRARY
                            bool "Library Effects (ROM pre-programmed)"
                            help
                                Use built-in 123 waveform effects from selected library.
                                Simple API: play effect by ID (1-123).
                                Effects have fixed duration and envelope.
                                
                                Pros: Easy to use, optimized timings
                                Cons: Limited customization

                        config MAIA_DRV2605L_MODE_COMPOSER
                            bool "Composer Mode (Custom patterns) [FUTURE]"
                            help
                                **NOT YET IMPLEMENTED - RESERVED FOR FUTURE**
                                
                                Create custom haptic patterns using:
                                - RTP (Real-Time Playback) mode
                                - Custom sequencing with callbacks
                                - Variable intensity and duration
                                - Integration with GPIO-controlled motors
                                
                                Will enable unified API:
                                  motor_set_state(ON/OFF, intensity, duration, cb)
                                  motor_play_pattern(pattern, cb)
                                
                                This mode prepares driver for future service layer
                                that will control all 3 motors (1x DRV2605L + 2x PWM).
                    endchoice

                    config MAIA_DRV2605L_AUTO_CALIBRATION
                        bool "Run auto-calibration on startup"
                        default y
                        depends on MAIA_DRV2605L_MODE_LIBRARY
                        help
                            Automatically calibrate motor on driver initialization.
                            Recommended for first use or after motor change.
                            Takes ~1-2 seconds during init.
                            
                            Datasheet Section 9.2 (Auto-Calibration Procedure)

                    config MAIA_DRV2605L_RATED_VOLTAGE
                        int "Motor rated voltage (RMS, 0-255)"
                        default 90
                        range 0 255
                        depends on MAIA_DRV2605L_MODE_LIBRARY
                        help
                            RMS voltage rating of the motor.
                            Formula: value = V_rms * 255 / 5.6
                            
                            For 3V motor: (3.0 * 255) / 5.6 ≈ 136
                            For 2.0V motor: (2.0 * 255) / 5.6 ≈ 90
                            
                            Default 90 is safe for most ERM motors.
                            Datasheet Section 8.5.16 (Rated Voltage Register)

                    config MAIA_DRV2605L_OVERDRIVE_CLAMP
                        int "Overdrive clamp voltage (0-255)"
                        default 180
                        range 0 255
                        depends on MAIA_DRV2605L_MODE_LIBRARY
                        help
                            Maximum voltage during overdrive.
                            Should be ~120% of rated voltage.
                            
                            For 3V motor: clamp ≈ 3.6V → (3.6 * 255) / 5.6 ≈ 163
                            For 2.0V motor: clamp ≈ 2.4V → (2.4 * 255) / 5.6 ≈ 109
                            
                            Default 180 provides good headroom.
                            Datasheet Section 8.5.17 (Overdrive Clamp Voltage)

                endmenu

            endmenu

            menu "Display (SSD1306)"
                config MAIA_SSD1306_ENABLE
                    bool "Enable SSD1306 OLED"
                    default y
                    help
                        Enable OLED display driver.

                config MAIA_SSD1306_I2C_ADDR
                    hex "I2C address"
                    default 0x3C
                    depends on MAIA_SSD1306_ENABLE

                config MAIA_SSD1306_CONTRAST
                    int "Display contrast (%)"
                    default 100
                    range 0 100
                    depends on MAIA_SSD1306_ENABLE
                    help
                        OLED display contrast level (0-100%).
            endmenu

            menu "IMU (MPU6050)"
                config MAIA_MPU6050_ENABLE
                    bool "Enable MPU6050 IMU"
                    default y
                    help
                        Enable IMU (accelerometer + gyroscope).

                config MAIA_MPU6050_I2C_ADDR
                    hex "I2C address"
                    default 0x68
                    depends on MAIA_MPU6050_ENABLE
            endmenu

            menu "LiDAR (VL53L5CX)"
                config MAIA_VL53L5CX_ENABLE
                    bool "Enable VL53L5CX ToF sensors"
                    default y
                    help
                        Enable Time-of-Flight sensors for obstacle detection.

                config MAIA_VL53L5CX_LEFT_I2C_ADDR
                    hex "Left sensor I2C address"
                    default 0x54
                    depends on MAIA_VL53L5CX_ENABLE

                config MAIA_VL53L5CX_RIGHT_I2C_ADDR
                    hex "Right sensor I2C address"
                    default 0x52
                    depends on MAIA_VL53L5CX_ENABLE

                config MAIA_VL53L5CX_FILTER_STATUS_5
                    bool "Filter target status 5 (Threshold fail)"
                    default y
                    depends on MAIA_VL53L5CX_ENABLE
                    help
                        Filter false positives in bright sunlight.

                config MAIA_VL53L5CX_FILTER_STATUS_6
                    bool "Filter target status 6 (Signal fail)"
                    default y
                    depends on MAIA_VL53L5CX_ENABLE
                    help
                        Filter invalid readings with no return signal.
            endmenu
        endmenu

        menu "OneWire Devices"
            config MAIA_DS18B20_ENABLE
                bool "Enable DS18B20 Temperature Sensor"
                default n
                help
                    Enable DS18B20 OneWire temperature sensor driver.
                    Hardware requires 4.7kΩ pull-up resistor to 3.3V on data line.

            menu "DS18B20 Temperature Sensor"
                depends on MAIA_DS18B20_ENABLE

                config MAIA_DS18B20_GPIO
                    int "DS18B20 OneWire GPIO"
                    default 3
                    help
                        GPIO pin connected to DS18B20 temperature sensor.
                        Default: GPIO3 (D2 on XIAO ESP32S3)

                choice MAIA_DS18B20_UNIT
                    prompt "Temperature Unit"
                    default MAIA_DS18B20_UNIT_CELSIUS

                    config MAIA_DS18B20_UNIT_CELSIUS
                        bool "Celsius"

                    config MAIA_DS18B20_UNIT_FAHRENHEIT
                        bool "Fahrenheit"

                    config MAIA_DS18B20_UNIT_KELVIN
                        bool "Kelvin"
                endchoice

                choice MAIA_DS18B20_RESOLUTION
                    prompt "Sensor Resolution"
                    default MAIA_DS18B20_RESOLUTION_12BIT

                    config MAIA_DS18B20_RESOLUTION_9BIT
                        bool "9 bits"

                    config MAIA_DS18B20_RESOLUTION_10BIT
                        bool "10 bits"

                    config MAIA_DS18B20_RESOLUTION_11BIT
                        bool "11 bits"

                    config MAIA_DS18B20_RESOLUTION_12BIT
                        bool "12 bits"
                endchoice

                choice MAIA_DS18B20_ROM_MODE
                    prompt "ROM Command Mode"
                    default MAIA_DS18B20_ROM_SKIP

                    config MAIA_DS18B20_ROM_SKIP
                        bool "Skip"

                    config MAIA_DS18B20_ROM_MATCH
                        bool "Match"
                endchoice
            endmenu
        endmenu
    endmenu

    menu "Tests Configuration"
        
        config MAIA_TEST_ENABLE
            bool "Enable test mode (disable MAIA App)"
            default n
            help
                Enable one of the available hardware tests below.
                When enabled, the selected test runs instead of the main app.

        choice MAIA_TEST_SELECT
            prompt "Select test to run"
            depends on MAIA_TEST_ENABLE
            default MAIA_TEST_BLINK
            help
                Choose which test to run when test mode is enabled.

            config MAIA_TEST_BLINK
                bool "LED Blink Test"
                help
                    Simple LED blink test for hardware validation.
            
            config MAIA_TEST_BUTTON
                bool "Button Driver Test"
                help
                    Test button driver with all events:
                    - PRESSED/RELEASED
                    - SINGLE_CLICK/DOUBLE_CLICK
                    - LONG_PRESS
                    - EXTRA_LONG_PRESS_1/2

            config MAIA_TEST_TEMPERATURE_SENSOR
                bool "Temperature Sensor (DS18B20)"
                help
                    Test DS18B20 OneWire temperature sensor:
                    - Blocking read mode
                    - Async read mode (trigger + scratchpad)
                    - CRC verification
                    - Unit conversion (Celsius/Fahrenheit/Kelvin)

            config MAIA_TEST_HAPTIC_MOTOR
                bool "Haptic Motor (DRV2605L)"
                help
                    Test DRV2605L haptic motor driver:
                    - Library effects playback (1-123)
                    - Effect sequencing
                    - Auto-calibration
                    - RTP mode (if composer enabled)
                    - Device status monitoring

        endchoice

    endmenu

endmenu